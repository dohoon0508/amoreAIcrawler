# 아모레몰 크롤링 수집 정보 정리

## 📦 1. 제품 정보 (Product Information)

### 기본 정보
- **제품명** (`product_name`): 파싱된 제품명 (예: "자음2종 세트 (150ml+125ml)")
- **원본 제품명** (`product_name_raw`): 브랜드 페이지에서 가져온 원본 텍스트
- **제품 코드** (`product_code`): 제품 고유 코드
- **제품 URL** (`product_url`): 제품 상세 페이지 URL

### 카테고리 정보
- **카테고리** (`category`): 메인 카테고리 (예: "스킨케어", "메이크업", "클렌징")
- **세부 카테고리** (`sub_category`): 세부 카테고리

### 가격 정보
- **정가** (`price`): 원래 가격 (예: "150,000")
- **현재 가격** (`current_price`): 할인된 가격 (예: "135,000")
- **가격대** (`price_range`): 가격 범위 분류
  - "1만원 미만"
  - "1-3만원"
  - "3-5만원"
  - "5-10만원"
  - "10-20만원"
  - "20만원 이상"
- **할인율** (`discount_rate`): 할인율 (예: "10%")
- **평점** (`rating`): 제품 평점 (예: "4.9")
- **리뷰 개수** (`review_count`): 총 리뷰 수 (예: "4,382")

### 상품정보제공 고시 정보
- **사용 방법** (`usage_method`): 제품 사용 방법 설명
- **성분** (`ingredients`): 화장품법에 따라 기재된 모든 성분 목록
  - 예: "정제수, 부틸렌글라이콜, 1,2-헥산다이올, 베타인, 글리세린..."
- **주의사항** (`precautions`): 사용 시 주의사항

---

## 💬 2. 리뷰 정보 (Review Information)

### 사용자 정보
- **사용자명** (`username`): 리뷰 작성자명 (일부 마스킹됨, 예: "wqc5*******")
- **사용자 정보 (원본)** (`user_info`): 원본 사용자 정보 텍스트
  - 예: "20대/여성/지성/트러블"
  - 예: "40대여성복합성주름"
  - 예: "50대 이상/여성/건성/탄력없음"

### 파싱된 사용자 정보
- **나이** (`age`): 나이대 (예: "20대", "30대", "40대", "50대", "50대 이상")
- **성별** (`gender`): 성별 (예: "여성", "남성")
- **피부타입 1** (`skin_type_1`): 주요 피부타입
  - 예: "지성", "건성", "복합성", "중성", "민감성"
- **피부타입 2** (`skin_type_2`): 추가 피부 고민
  - 예: "트러블", "모공", "주름", "탄력없음", "건조함", "민감성"

### 리뷰 평가 정보
- **평점** (`rating`): 리뷰 평점 (1~5점)
- **옵션** (`option`): 구매한 제품 옵션 (예: "자음2종", "베리")
- **리뷰 타입** (`review_type`): 리뷰 유형 (예: "한달 사용 리뷰", "1개월 사용 리뷰")

### 특이사항 (prdStyle)
제품의 특정 특성에 대한 평가:
- **특이사항 1** (`special_note_1`): 예: "지속력: 지속되어 건조한 피부에도 적합하다고 생각됩니다."
- **특이사항 2** (`special_note_2`): 예: "사용감: 사용감"
- **특이사항 3** (`special_note_3`): 예: "향: 향"

특이사항 항목 예시:
- 발색감, 지속력, 사용감, 향, 민감성
- 보습감, 유분기, 흡수력, 끈적임
- 각질, 트러블, 모공, 주름 개선

**참고**: 브랜드 크롤링 시 각 리뷰에 제품 코드와 제품명이 자동으로 추가됩니다.

### 리뷰 내용
- **리뷰 텍스트** (`review_text`): 리뷰 본문 내용

---

## 📊 3. 요약 정보 (Summary Information)

### 제품 요약
- **요약** (`summary`): 리뷰들을 종합한 요약 텍스트
- **핵심 포인트** (`key_points`): JSON 형태의 주요 포인트
- **평균 평점** (`average_rating`): 전체 리뷰의 평균 평점
- **총 리뷰 수** (`total_reviews`): 총 리뷰 개수
- **긍정 리뷰 수** (`positive_count`): 긍정적 리뷰 개수
- **부정 리뷰 수** (`negative_count`): 부정적 리뷰 개수

---

## 🔄 4. 크롤링 기능

### 단일 제품 크롤링
- 제품 상세 페이지에서 제품 정보 및 리뷰 수집
- 페이지네이션 및 "더 보기" 버튼 처리
- 최대 페이지 수, 최대 리뷰 수 제한 가능

### 브랜드 전체 크롤링
- 브랜드 페이지에서 모든 제품 목록 수집 (예: 설화수 77개 제품)
- 각 제품별로 리뷰 크롤링 수행
- 스크롤을 통한 무한 스크롤 제품 로드 지원

### 크롤링 제한 옵션
- **더 보기 버튼**: 사용자 지정 가능 (`--max-more-clicks N`)
  - 테스트 모드: 기본 3회
  - 일반 모드: 기본 15회
  - 사용자 지정: 원하는 횟수 설정 가능 (예: `--max-more-clicks 10`)
- **최대 페이지 수**: 제품당 최대 페이지 수 설정 (`--max-pages N`)
- **최대 리뷰 수**: 제품당 최대 리뷰 수 설정 (`--max-reviews N`)
- **최대 제품 수**: 브랜드 모드에서 최대 제품 수 설정 (`--max-products N`)

---

## 💾 5. 데이터 저장 형식

### 데이터베이스 (SQLite)
- **products 테이블**: 제품 정보 저장
- **reviews 테이블**: 리뷰 정보 저장
- **product_summaries 테이블**: 제품 요약 정보 저장

### JSON 파일

#### 브랜드 크롤링 모드
브랜드 크롤링 시 자동으로 두 개의 JSON 파일이 생성됩니다:

1. **`info_{브랜드명}.json`** - 제품 정보만 저장
```json
{
  "brand_url": "브랜드 페이지 URL",
  "crawled_at": "크롤링 일시",
  "total_products": 77,
  "products": [
    {
      "product_name": "...",
      "product_code": "...",
      "price": "150,000",
      "current_price": "135,000",
      "discount_rate": "10%",
      "rating": "4.9",
      "review_count": "4,382",
      "usage_method": "...",
      "ingredients": "...",
      "precautions": "..."
    }
  ]
}
```

2. **`review_{브랜드명}.json`** - 모든 리뷰 저장
```json
{
  "brand_url": "브랜드 페이지 URL",
  "crawled_at": "크롤링 일시",
  "total_reviews": 10105,
  "reviews": [
    {
      "product_code": "111170002324",
      "product_name": "자음2종 세트 (150ml+125ml)",
      "username": "...",
      "age": "40대",
      "gender": "남성",
      "skin_type_1": "복합성",
      "skin_type_2": "주름",
      "rating": 5,
      "review_text": "..."
    }
  ]
}
```

#### 단일 제품 모드
`--output` 옵션을 사용하면:
- `info_{output}.json` - 제품 정보
- `review_{output}.json` - 리뷰

---

## 📝 6. 데이터 수집 예시

### 제품 정보 예시
```json
{
  "product_name": "자음2종 세트 (150ml+125ml)",
  "product_code": "111170002324",
  "product_url": "https://www.amoremall.com/kr/ko/product/detail?onlineProdSn=63917",
  "category": "",
  "sub_category": "",
  "price": "150,000",
  "current_price": "135,000",
  "price_range": "10-20만원",
  "discount_rate": "10%",
  "rating": "4.9",
  "review_count": "4,382",
  "usage_method": "아침, 저녁 적당량을 취해 얼굴 안쪽에서 바깥쪽으로 펴 발라 준 후 가볍게 두드리며 흡수시켜 줍니다.",
  "ingredients": "[자음수] 정제수, 부틸렌글라이콜, 1,2-헥산다이올, 베타인, 글리세린...",
  "precautions": "1. 화장품 사용 시 또는 사용 후 직사광선에 의하여 사용부위가 붉은 반점, 부어오름 또는 가려움증 등의 이상 증상이나 부작용이 있는 경우에는 전문의 등과 상담할 것..."
}
```

### 리뷰 정보 예시
```json
{
  "product_code": "111170002324",
  "product_name": "자음2종 세트 (150ml+125ml)",
  "username": "wqc5*******",
  "user_info": "40대남성복합성주름",
  "age": "40대",
  "gender": "남성",
  "skin_type_1": "복합성",
  "skin_type_2": "주름",
  "rating": 5,
  "option": "자음2종",
  "review_type": "",
  "special_note_1": "지속력: 지속되어 건조한 피부에도 적합하다고 생각됩니다.",
  "special_note_2": "사용감: 사용감",
  "special_note_3": "향: 향",
  "review_text": "가벼운 제형과 뛰어난 흡수력, 그리고 눈에 띄는 효과로 매우 만족스러운 제품입니다. 피부 탄력과 보습, 주름 개선을 원하는 분들에게 추천드려요..."
}
```

**참고**: 브랜드 크롤링 모드에서는 각 리뷰에 `product_code`와 `product_name`이 자동으로 추가되어 어떤 제품의 리뷰인지 쉽게 식별할 수 있습니다.

---

## ✅ 7. 현재 구현 상태

### ✅ 완료된 기능
- [x] 제품 기본 정보 수집 (제품명, 가격, 카테고리 등)
- [x] 제품명 파싱 (할인율, 가격, 제품명, 평점, 리뷰 개수 분리)
- [x] 상품정보제공 고시 정보 수집 (사용 방법, 성분, 주의사항)
- [x] 리뷰 정보 수집 (사용자 정보, 평점, 리뷰 텍스트)
- [x] 사용자 정보 파싱 (나이, 성별, 피부타입 분리)
- [x] 특이사항 수집 (prdStyle 정보)
- [x] 페이지네이션 처리
- [x] "더 보기" 버튼 처리 (사용자 지정 가능, 기본값: 테스트 3회, 일반 15회)
- [x] JSON 파일 분리 저장 (제품 정보 / 리뷰)
- [x] 브랜드 전체 제품 크롤링 (77개 제품 인식)
- [x] 데이터베이스 저장
- [x] JSON 파일 저장

### 🔄 개선 가능한 부분
- [ ] 사용 방법 추출 정확도 향상
- [ ] 주의사항 추출 정확도 향상
- [ ] 제품명 파싱 정확도 향상 (일부 제품에서 미완성)

---

## 📌 참고사항

- 성분 정보는 "상품정보제공 고시 보기" 버튼을 클릭해야 표시됩니다.
- 리뷰는 페이지네이션과 "더 보기" 버튼을 통해 동적으로 로드됩니다.
- 브랜드 페이지는 스크롤을 통해 모든 제품을 로드할 수 있습니다.
- 중복 리뷰는 자동으로 제거됩니다 (사용자명 + 리뷰 텍스트 일부 기준).
- 브랜드 크롤링 시 JSON 파일이 자동으로 두 개로 분리됩니다:
  - `info_{브랜드명}.json`: 제품 정보만 저장
  - `review_{브랜드명}.json`: 모든 리뷰 저장 (각 리뷰에 제품 코드와 제품명 포함)
- 더보기 버튼 클릭 횟수는 `--max-more-clicks` 옵션으로 조절할 수 있습니다.
- 제품 가격 정보는 `price`(정가)와 `current_price`(할인가)로 구분됩니다.

